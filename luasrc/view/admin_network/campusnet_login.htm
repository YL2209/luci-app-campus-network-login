mkdir -p luasrc/view/admin_network
cat << EOF > luasrc/view/admin_network/campusnet_login.htm
<%+header%>
<h2><%:Campus Network Login%></h2>
<form method="post" action="<%=luci.dispatcher.build_url('admin', 'network', 'campusnet_login')%>">
    <p>
        <label for="user"><%:Username:%></label>
        <input type="text" id="user" name="user" value="<%=luci.sys.exec("uci get login_config.main.user 2>/dev/null") or ""%>" />
    </p>
    <p>
        <label for="pwd"><%:Password:%></label>
        <input type="password" id="pwd" name="pwd" value="<%=luci.sys.exec("uci get login_config.main.pwd 2>/dev/null") or ""%>" />
    </p>
    <p>
        <label for="wlanuserip"><%:WLAN User IP:%></label>
        <input type="text" id="wlanuserip" name="wlanuserip" value="<%=luci.sys.exec("uci get login_config.main.wlanuserip 2>/dev/null") or ""%>" />
    </p>
    <p>
        <label for="nasip"><%:NAS IP:%></label>
        <input type="text" id="nasip" name="nasip" value="<%=luci.sys.exec("uci get login_config.main.nasip 2>/dev/null") or ""%>" />
    </p>
    <p>
        <label for="login_url"><%:Login URL:%></label>
        <input type="text" id="login_url" name="login_url" value="<%=luci.sys.exec("uci get login_config.main.login_url 2>/dev/null") or ""%>" />
    </p>
    <p>
        <label for="ping_ip"><%:Ping IP for Connectivity Test:%></label>
        <input type="text" id="ping_ip" name="ping_ip" value="<%=luci.sys.exec("uci get login_config.main.ping_ip 2>/dev/null") or ""%>" />
    </p>
    <p>
        <label for="max_attempts"><%:Maximum Attempts:%></label>
        <input type="number" id="max_attempts" name="max_attempts" value="<%=luci.sys.exec("uci get login_config.main.max_attempts 2>/dev/null") or 5%>" />
    </p>
    <p>
        <input type="submit" name="save_config" value="<%:Save Config%>" />
        <input type="submit" name="run_login" value="<%:Run Login Script%>" />
    </p>
    <% if luci.http.formvalue("save_config") and luci.http.formvalue("error_msg") then %>
        <p style="color: red;"><%=luci.http.formvalue("error_msg")%></p>
    <% end %>
</form>
<% if luci.http.formvalue("run_login") then %>
    <pre><%=luci.sys.exec("/usr/bin/campusnet_login.sh 2>&1")%></pre>
<% end %>
<%+footer%>
EOF